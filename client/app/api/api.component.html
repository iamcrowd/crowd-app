<div *ngVar="{ showEndpoints: true } as apiSettings" id="api-container" class="d-flex flex-row">
  <div class="side-menu d-flex flex-row flex-shrink-0 overflow-y-auto">
    <div class="nav nav-pills nav-flush flex-column flex-nowrap text-center">
      <a *ngFor="let api of apis  | keyvalue" [title]="api.value.description"
        class="side-btn btn nav-link py-3 border-bottom" [class.active]="selectedAPI == api.key"
        (click)="selectedAPI = api.key" (click)="apiSettings.showEndpoints = true">
        <i class="fa fa-fw fa-{{api.value.icon}} fa-2x"></i><br>
        {{api.value.name}}
      </a>
    </div>
  </div>
  <div class="secondary-side-menu d-flex flex-row-reverse flex-shrink-0"
    [style.maxWidth]="apiSettings.showEndpoints ? '14rem' : '1.5rem'">
    <div class="d-flex align-items-center flex-shrink-0" style="width: 1.5rem;">
      <button class="toggle-menu-btn toggle-menu-btn-large btn p-0 w-100 h-100"
        (click)="apiSettings.showEndpoints = !apiSettings.showEndpoints">
        <i class="fa fa-fw fa-chevron-{{apiSettings.showEndpoints ? 'left' : 'right'}}"></i>
      </button>
    </div>
    <div
      class="nav nav-pills nav-flush flex-grow-1 flex-column flex-nowrap text-center overflow-y-auto overflow-x-hidden h-100 max-w-max-c">
      <a *ngFor="let endpoint of apis[selectedAPI].endpoints | keyvalue"
        class="side-btn btn nav-link py-3 border-bottom text-left min-w-max-c" [title]="endpoint.value.description"
        (click)="setEndpoint(endpoint.key)">
        <span class="call-type">{{endpoint.value.type}}</span> {{endpoint .value.name}}
      </a>
    </div>
  </div>
  <div class="central-menu flex-grow-1 d-flex flex-column">
    <div class="tabs d-flex flex-row">
      <div *ngFor="let tab of tabs; let index = index" class="tab btn"
        (click)="$event.which == 2 ? removeTab(index) : selectedTab = index" [class.tab-active]="selectedTab == index">
        <div class="d-flex flex-row">
          <div class="tab-name" *ngIf="tab.api != null">
            <span class="call-type">{{apis[tab.api].endpoints[tab.endpoint].type}}</span>
            {{apis[tab.api].endpoints[tab.endpoint].name}}
          </div>
          <div class="tab-name" *ngIf="tab.api == null">
            New Tab
          </div>
          <div>
            <i class="tab-delete fa fa-fw fa-times" (click)="$event.stopPropagation(); removeTab(index)"></i>
          </div>
        </div>
      </div>
      <div class="tab new-tab btn mr-3" (click)="newTab()">
        <i class="fa fa-fw fa-plus"></i>
      </div>
    </div>
    <div class="tab-content d-flex flex-row">
      <div *ngFor="let tab of tabs; let index = index" class="tab-pane" [class.active]="selectedTab == index">
        <div *ngIf="!tab.api" class="text-center d-flex flex-row align-items-center justify-content-center w-100 h-100">
          <div style="width: 5rem;">
            <i class="fa fa-file-o fa-5x"></i>
          </div>
          <div style="width: 10rem;">
            This is a new tab.
            <b>Please select an API and an endpoint to make a query.</b>
          </div>
        </div>
        <div *ngIf="tab.api" class="d-flex flex-row w-100 h-100">
          <div class="d-flex flex-responsive w-100 h-100">
            <div class="tab-pane-input d-flex flex-column w-100" [class.maximize-output]="tab.maximizeOutput"
              (click)="tab.maximizeOutput ? tab.maximizeOutput = false : null">
              <div class="flex-grow-1">
                <label class="tab-url float-right">
                  <i class="fa fa-fw fa-link"></i>
                  {{apis[tab.api].endpoints[tab.endpoint].url ? apis[tab.api].endpoints[tab.endpoint].url :
                  apis[tab.api].service.config.url}}{{apis[tab.api].endpoints[tab.endpoint].method ?
                  apis[tab.api].endpoints[tab.endpoint].method : ''}}
                </label>
                <h3>Input</h3>
                <div class="tab-pane-input-content" style="height: calc(100% - 2.5rem);"
                  [class.maximize-output]="tab.maximizeOutput">
                  <span *ngIf="tab.api == 'metamodel' && tab.endpoint == 6">
                    <ng-container [ngTemplateOutlet]="metatoowlInput" [ngTemplateOutletContext]="{ tab: tab }">
                    </ng-container>
                  </span>
                  <span *ngIf="tab.api == 'reasoning'">
                    <ng-container [ngTemplateOutlet]="reasoningInput" [ngTemplateOutletContext]="{ tab: tab }">
                    </ng-container>
                  </span>
                  <span *ngIf="tab.api == 'test' && tab.endpoint == 0">
                    <ng-container [ngTemplateOutlet]="owltometa" [ngTemplateOutletContext]="{ tab: tab }">
                    </ng-container>
                  </span>
                  <span
                    *ngIf="!(tab.api == 'metamodel' && tab.endpoint == 6) && !(tab.api == 'reasoning') && !(tab.api == 'test' && tab.endpoint == 0)">
                    <ng-container [ngTemplateOutlet]="inputCodeEditor" [ngTemplateOutletContext]="{ tab: tab }">
                    </ng-container>
                  </span>
                </div>
              </div>
              <div class="tab-pane-send flex-shrink-0" [class.maximize-output]="tab.maximizeOutput">
                <button class="btn btn-primary" (click)="send(index)">Send</button>
              </div>
            </div>
            <div class="tab-pane-output d-flex flex-column w-100"
              [class.show-output]="tab.showOutput || tab.maximizeOutput">
              <div class="flex-grow-1">
                <button *ngIf="tab.output && tab.showOutput" class="toggle-menu-btn btn float-right hide-xl"
                  (click)="tab.maximizeOutput = !tab.maximizeOutput">
                  <i class="fa fa-fw fa-chevron-{{tab.maximizeOutput ? 'down' : 'up'}}"></i>
                </button>
                <button *ngIf="tab.output && !tab.maximizeOutput"
                  class="toggle-menu-btn btn float-right hide-xl" (click)="tab.showOutput = !tab.showOutput">
                  <i class="fa fa-fw fa-chevron-{{tab.showOutput ? 'down' : 'up'}}"></i>
                </button>
                <i class="fa fa-fw fa-spinner fa-pulse fa-2x float-right" *ngIf="tab.loadingOutput"></i>
                <h3>Output</h3>
                <div *ngIf="tab.output" style="height: calc(100% - 5rem);">
                  <span *ngIf="tab.output">
                    <span *ngIf="tab.api == 'metamodel' && tab.endpoint == 6">
                      <ng-container [ngTemplateOutlet]="codeEditor" [ngTemplateOutletContext]="{
                        container: tab,
                        parameter: 'output',
                        label: apis[tab.api].endpoints[tab.endpoint].parameters.to.toUpperCase(),
                        languageMode: 'xml',
                        open: false,
                        outputMode: true,
                        fullHeight: true
                      }"></ng-container>
                    </span>
                    <span *ngIf="tab.api == 'reasoning'">
                      <ng-container [ngTemplateOutlet]="outputTabs" [ngTemplateOutletContext]="{
                          container: tab.output,
                          open: {
                            'KF': {
                              editorModel: apis[tab.api].endpoints[tab.endpoint].parameters.to,
                              sourceModel: apis[tab.api].endpoints[tab.endpoint].parameters.to
                            }
                          },
                          raw: {
                            container: tab,
                            parameter: 'output',
                            label: 'KF + Reasoning',
                            outputMode: true,
                            fullHeight: true,
                            serialize: true,
                            open: {
                              editorModel: apis[tab.api].endpoints[tab.endpoint].parameters.to,
                              sourceModel: apis[tab.api].endpoints[tab.endpoint].parameters.to,
                              parameter: 'KF'
                            }
                          }
                        }"></ng-container>
                    </span>
                    <span *ngIf="tab.api == 'test' && tab.endpoint == 0">
                      <span *ngIf="tab.output.success == null">
                        <ng-container [ngTemplateOutlet]="outputTabs" [ngTemplateOutletContext]="{
                          container: tab.output,
                          list: ['supported', 'unsupported'],
                          open: {
                            'kf': {
                              editorModel: apis[tab.api].endpoints[tab.endpoint].parameters.to,
                              sourceModel: apis[tab.api].endpoints[tab.endpoint].parameters.to
                            }
                          },
                          raw: {
                            container: tab,
                            parameter: 'output',
                            label: 'KF + Metrics',
                            open: false,
                            outputMode: true,
                            fullHeight: true,
                            serialize: true,
                            open: {
                              editorModel: apis[tab.api].endpoints[tab.endpoint].parameters.to,
                              sourceModel: apis[tab.api].endpoints[tab.endpoint].parameters.to,
                              parameter: 'kf'
                            }
                          }
                        }"></ng-container>
                      </span>
                      <span *ngIf="tab.output.success != null">
                        <ng-container [ngTemplateOutlet]="outputTabs" [ngTemplateOutletContext]="{
                          container: tab.output,
                          subtab: {
                            'success': {
                              raw: {
                                container: tab.output,
                                parameter: 'success',
                                label: '‎',
                                open: false,
                                outputMode: true,
                                serialize: true
                              },
                              subtab: {
                                '*': {
                                  list: ['supported', 'unsupported'],
                                  open: {
                                    'kf': {
                                      editorModel: apis[tab.api].endpoints[tab.endpoint].parameters.to,
                                      sourceModel: apis[tab.api].endpoints[tab.endpoint].parameters.to
                                    }
                                  },
                                  raw: {
                                    container: tab.output.success,
                                    parameter: '*',
                                    label: '‎',
                                    open: {
                                      editorModel: apis[tab.api].endpoints[tab.endpoint].parameters.to,
                                      sourceModel: apis[tab.api].endpoints[tab.endpoint].parameters.to,
                                      parameter: 'kf'
                                    },
                                    outputMode: true,
                                    serialize: true
                                  }
                                }
                              }
                            }
                          },
                          raw: {
                            container: tab,
                            parameter: 'output',
                            label: 'Results',
                            open: false,
                            outputMode: true,
                            fullHeight: true,
                            serialize: true
                          }
                        }"></ng-container>
                      </span>
                    </span>
                    <span
                      *ngIf="!(tab.api == 'metamodel' && tab.endpoint == 6) && !(tab.api == 'reasoning') && !(tab.api == 'test' && tab.endpoint == 0)">
                      <ng-container [ngTemplateOutlet]="outputCodeEditor" [ngTemplateOutletContext]="{ tab: tab }">
                      </ng-container>
                    </span>
                  </span>
                </div>
                <div *ngIf="!tab.output"
                  class="text-center d-flex flex-row align-items-center justify-content-center w-100 h-100 hide-sm">
                  <div style="width: 5rem;">
                    <i class="fa fa-file-text-o fa-5x"></i>
                    <!-- <span class="fa-stack fa-lg fa-5x">
                      <i class="fa fa-file-text-o fa-stack-1x"></i>
                      <i class="fa fa-ban fa-stack-2x text-danger"></i>
                    </span> -->
                  </div>
                  <div style="width: 10rem;">
                    There is no output to display.<br>
                    <b>Please send a query to the endpoint.</b>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane-metrics d-flex flex-row" [style.max-width]="tab.showMetrics ? '14.5rem' : '1.5rem'">
            <div class="d-flex align-items-center flex-shrink-0" style="width: 1.5rem;">
              <button class="toggle-menu-btn toggle-menu-btn-large btn p-0 w-100 h-100"
                (click)="tab.showMetrics = !tab.showMetrics">
                <i class="fa fa-fw fa-chevron-{{tab.showMetrics ? 'right' : 'left'}}"></i>
              </button>
            </div>
            <div class="metrics-container flex-grow-1 d-flex flex-column">
              <h3 class="text-center">Metrics</h3>
              <div *ngIf="!tab.output?.metrics" class="text-center text-muted overflow-y-auto">
                No metrics available.
              </div>
              <div *ngIf="tab.output?.metrics" class="metrics-list overflow-y-auto">
                <div *ngFor="let metric of tab.output.metrics | keyvalue" class="metric">
                  <label class="font-weight-bold key">{{fromInfix(metric.key)}}</label><br />
                  <label style="padding-left: 1rem;" *ngIf='tab.output.success == null'>{{metric.value}}</label>
                  <label style="padding-left: 1rem;" *ngIf='tab.output.success != null'>
                    <b>T:</b> {{roundMetric(metric.value.total)}}, <b>A:</b> {{roundMetric(metric.value.avg)}},
                    <b>m:</b>
                    {{roundMetric(metric.value.min)}}, <b>M:</b> {{roundMetric(metric.value.max)}}
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--generic code editor for use in both input and output templates-->
<ng-template #codeEditor let-container='container' let-parameter='parameter' let-label='label'
  let-languageMode='languageMode' let-outputMode='outputMode' let-listMode='listMode' let-serialize='serialize'
  let-example='example' let-open='open' let-fullHeight='fullHeight' let-raw='raw'>
  <button *ngIf="raw" class="btn btn-secondary btn-sm float-left mr-2" (click)="raw.raw = !raw.raw"
    tippy="Toggle raw data view">
    <i class="fa fa-fw fa-file-code-o"></i>
  </button>
  <label>{{label}}</label>&nbsp;
  <button *ngIf="example && !outputMode" class="example-btn btn btn-sm btn-warning font-weight-bold"
    (click)="container[parameter] = example">EXAMPLE</button>
  <button class="btn btn-secondary btn-sm float-right" ngxClipboard
    [cbContent]="serialize ? JSON.stringify(container[parameter], null, '\t') : container[parameter]"
    tippy="Copy to Clipboard">
    <i class="fa fa-fw fa-clipboard"></i>
  </button>
  <button class="btn btn-secondary btn-sm float-right" *ngIf="open"
    (click)="openInEditor(open.editorModel, open.sourceModel, open.parameter ? container[parameter][open.parameter] : container[parameter], open.serialize)"
    tippy="Open in Editor" style="margin-right: 0.5rem;">
    <i class="fa fa-fw fa-th"></i>
  </button>
  <ngx-codemirror *ngIf="!outputMode && !listMode" [(ngModel)]="container[parameter]" [preserveScrollPosition]="true"
    [options]="{
    theme: 'duotone-' + (this.darkmodeService.isDarkMode() ? 'dark' : 'light'),
    mode: !languageMode ? { name: 'javascript', jsonld: true } : languageMode,
    lineNumbers: true,
    lineWrapping: true,
    foldGutter: true,
    gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter', 'CodeMirror-lint-markers'],
    autoCloseBrackets: true,
    matchBrackets: true,
    readOnly: false
  }"></ngx-codemirror>
  <ngx-codemirror *ngIf="outputMode && !listMode" [class.codemirror-full-height]="fullHeight"
    [ngModel]="serialize ? JSON.stringify(container[parameter], null, '\t') : container[parameter]"
    [preserveScrollPosition]="true" [options]="{
    theme: 'duotone-' + (this.darkmodeService.isDarkMode() ? 'dark' : 'light'),
    mode: !languageMode ? { name: 'javascript', jsonld: true } : languageMode,
    lineNumbers: false,
    lineWrapping: true,
    foldGutter: true,
    gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter', 'CodeMirror-lint-markers'],
    autoCloseBrackets: true,
    matchBrackets: true,
    readOnly: true
  }"></ngx-codemirror>
  <div *ngIf="listMode" class="overflow-y-auto overflow-x-hidden text-break" style="height: calc(100% - 2.5rem);">
    <ul>
      <li *ngFor="let item of container[parameter] | keyvalue">{{item.value}}</li>
    </ul>
  </div>
</ng-template>

<!--generic code editor configuration for use in input templates-->
<ng-template #inputCodeEditor let-tab="tab" let-parameter='parameter' let-label='label'>
  <ng-container [ngTemplateOutlet]="codeEditor" [ngTemplateOutletContext]="{
    container: tab.parameters,
    parameter: parameter ? parameter : 'data',
    label: label ? label : apis[tab.api].endpoints[tab.endpoint].parameters.from.toUpperCase(),
    example: JSON.stringify(apis[tab.api].endpoints[tab.endpoint].example, null, '\t'),
    open: {
      editorModel: apis[tab.api].endpoints[tab.endpoint].parameters.from,
      sourceModel: apis[tab.api].endpoints[tab.endpoint].parameters.from,
      serialize: true
    }
  }"></ng-container>
</ng-template>

<!--generic code editor configuration for use in output templates-->
<ng-template #outputCodeEditor let-tab="tab" let-parameter='parameter' let-label='label'>
  <ng-container [ngTemplateOutlet]="codeEditor" [ngTemplateOutletContext]="{
    container: tab,
    parameter: parameter ? parameter : 'output',
    label: label ? label : apis[tab.api].endpoints[tab.endpoint].parameters.to.toUpperCase(),
    outputMode: true,
    fullHeight: true,
    serialize: true,
    open: {
      editorModel: apis[tab.api].endpoints[tab.endpoint].parameters.from,
      sourceModel: apis[tab.api].endpoints[tab.endpoint].parameters.to,
      serialize: false
    }
  }"></ng-container>
</ng-template>

<!--generic template for divide output json in tabs-->
<ng-template #outputTabs let-container='container' let-open='open' let-subtab='subtab' let-raw='raw' let-list='list'
  let-rawTemplate='rawTemplate' let-rawParameter='rawParameter' let-adjustedHeight='adjustedHeight' let-alt='alt'>
  <span *ngVar="{ opened: Object.keys(container)[0], raw: false } as settings">
    <span *ngIf="settings.raw">
      <ng-container [ngTemplateOutlet]="raw.template ? raw.template : codeEditor"
        [ngTemplateOutletContext]="Object.assign(raw, { raw: settings })">
      </ng-container>
    </span>
    <span *ngIf="!settings.raw">
      <div class="row flex-shrink-0 m-0 overflow-auto">
        <div class="col collapse-buttons p-0" [class.alt]='alt'>
          <button *ngIf="raw" class="btn btn-sm btn-secondary raw" (click)="settings.raw = !settings.raw"
            tippy="Toggle raw data view">
            <i class="fa fa-fw fa-file-code-o"></i>
          </button>
          <button class="btn btn-sm" *ngFor="let tab of container | keyvalue"
            [class.active]="tab.key == settings.opened" (click)="settings.opened = tab.key">{{tab.key}}
          </button>
        </div>
      </div>
      <div class="flex-grow-1 h-100 collapse-container" [class.alt]='alt'
        [class.adjusted-height]="!settings.raw && adjustedHeight">
        <span *ngFor="let tab of container | keyvalue">
          <span *ngIf="tab.key == settings.opened">
            <ng-container *ngIf="!subtab || (!subtab[tab.key] && !subtab['*'])" [ngTemplateOutlet]="codeEditor"
              [ngTemplateOutletContext]="{
              container: container,
              parameter: tab.key,
              label: '‎',
              outputMode: true,
              listMode: list && list.includes(tab.key),
              serialize: true,
              open: open && open[tab.key] ? {
                editorModel: open[tab.key].editorModel,
                sourceModel: open[tab.key].sourceModel,
                serialize: open[tab.key].serialize
              } : false
            }"></ng-container>
            <ng-container *ngIf="subtab && (subtab[tab.key] || subtab['*'])" [ngTemplateOutlet]="outputTabs"
              [ngTemplateOutletContext]="{
              container: container[tab.key],
              list: subtab[tab.key] ? subtab[tab.key].list : subtab['*'].list,
              open: subtab[tab.key] ? subtab[tab.key].open : subtab['*'].open,
              raw: subtab[tab.key] ? subtab[tab.key].raw : Object.assign(subtab['*'].raw, { parameter: tab.key }),
              subtab: subtab[tab.key] ? subtab[tab.key].subtab : subtab['*'].subtab,
              adjustedHeight: true,
              alt: !alt
            }"></ng-container>
          </span>
        </span>
      </div>
    </span>
  </span>
</ng-template>

<!--custom input templates-->
<!--input template for meta to owl-->
<ng-template #metatoowlInput let-tab='tab'>
  <div class="d-flex flex-column h-100 w-100">
    <div class="row flex-shrink-0" style="padding-bottom: 1rem;">
      <div class="col-6">
        <label>Encoding</label>
        <select class="form-control custom-select my-1 mr-sm-2" [(ngModel)]="tab.parameters.format">
          <option value="owl2-alcqi" selected>OWL2 - ALCQI</option>
          <option value="owllink-alcqi">OLWLink - ALCQI</option>
        </select>
      </div>
      <div *ngIf="tab.parameters.format == 'owl2-alcqi'" class="col-6">
        <label>Syntax</label>
        <select class="form-control custom-select my-1 mr-sm-2" [(ngModel)]="tab.parameters.syntax">
          <option value="rdfxml" selected>RDF/XML</option>
          <option value="owlxml">OWL/XML</option>
          <option value="turtle">Turtle</option>
          <option value="ntriples">N-Triples</option>
          <option value="manchester">Manchester</option>
          <option value="functional">Functional</option>
        </select>
      </div>
    </div>
    <div class="flex-grow-1 h-100">
      <ng-container [ngTemplateOutlet]="inputCodeEditor" [ngTemplateOutletContext]="{ tab: tab }">
      </ng-container>
    </div>
  </div>
</ng-template>

<!--input template for reasoning-->
<ng-template #reasoningInput let-tab='tab'>
  <div class="d-flex flex-column h-100 w-100">
    <div class="row flex-shrink-0" style="padding-bottom: 1rem;">
      <div class="col">
        <label>Reasoner</label>
        <select class="form-control custom-select my-1 mr-sm-2" [(ngModel)]="tab.parameters.reasoner">
          <option value="Racer">Racer</option>
          <option value="Konclude">Konclude</option>
        </select>
      </div>
      <div class="col">
        <label>Encoding</label>
        <select class="form-control custom-select my-1 mr-sm-2" [(ngModel)]="tab.parameters.strategy">
          <option value="alcqi" selected>ALCQI</option>
        </select>
      </div>
    </div>
    <div class="row flex-shrink-0" style="padding-bottom: 1rem;">
      <div class="col">
        <div class="custom-control custom-switch">
          <input type="checkbox" class="custom-control-input" [(ngModel)]="tab.parameters.cards" id="cards-switch">
          <label class="custom-control-label" for="cards-switch">Reason Cardinalities</label>
          <i class="btn btn-sm fa fa-fw fa-info-circle" [tippy]="cards_warning" placement="right"></i>
        </div>
        <ng-template #cards_warning>
          <span class="text-muted">(this may take too much time)</span><br>
          <span class="text-danger">(this will replace the current cardinalities with the inferred ones)</span>
        </ng-template>
      </div>
    </div>
    <div class="flex-grow-1 h-100">
      <ng-container [ngTemplateOutlet]="inputCodeEditor" [ngTemplateOutletContext]="{ tab: tab, parameter: 'kf' }">
      </ng-container>
    </div>
  </div>
</ng-template>

<!--input template for owl to meta-->
<ng-template #owltometa let-tab='tab'>
  <div class="d-flex flex-column h-100 w-100">
    <div class="row flex-shrink-0" style="padding-bottom: 0.5rem;">
      <div class="col">
        <div class="custom-control custom-switch">
          <input type="checkbox" class="custom-control-input" [(ngModel)]="tab.parameters.reasoning"
            id="reasoning-switch">
          <label class="custom-control-label" for="reasoning-switch">Reasoning</label>
        </div>
      </div>
    </div>
    <div class="row flex-shrink-0 m-0 overflow-auto">
      <div class="col collapse-buttons p-0">
        <button class="btn" [class.active]="tab.parameters.input == 'string'"
          (click)="tab.parameters.input = 'string'">String</button>
        <button class="btn" [class.active]="tab.parameters.input == 'uri'"
          (click)="tab.parameters.input = 'uri'">URI</button>
        <button class="btn" [class.active]="tab.parameters.input == 'files'"
          (click)="tab.parameters.input = 'files'">Files</button>
      </div>
    </div>
    <div class="flex-grow-1 h-100 collapse-container overflow-y-auto overflow-x-hidden">
      <span *ngIf="tab.parameters.input == 'string'">
        <ng-container [ngTemplateOutlet]="codeEditor" [ngTemplateOutletContext]="{
          container: tab.parameters,
          parameter: 'ontologyString',
          label: apis[tab.api].endpoints[tab.endpoint].parameters.from.toUpperCase(),
          example: apis[tab.api].endpoints[tab.endpoint].example,
          languageMode: 'xml',
          open: false
        }"></ng-container>
      </span>
      <span *ngIf="tab.parameters.input == 'uri'">
        <div class="col-xl-6">
          <label>URI</label>
          <input class="form-control" [(ngModel)]="tab.parameters.ontologyUri"
            placeholder="http://www.w3.org/2006/time#" />
        </div>
        <div class="col" style="padding-top: 0.75rem;">
          <label>Examples</label>
          <div>
            <div class="card-deck">
              <div *ngFor="let uri of examples.uris" class="btn card bg-warning text-white text-center p-2 mr-0"
                style="width: 4rem; min-width: 4rem; max-width: 4rem; margin-bottom: 1rem;"
                (click)="tab.parameters.ontologyUri = uri.url" [tippy]="uri.url" [maxWidth]="'none'">
                <blockquote class="blockquote mb-0">
                  {{uri.emoji}}
                </blockquote>
              </div>
            </div>
          </div>
        </div>
      </span>
      <span *ngIf="tab.parameters.input == 'files'">
        <div ngfDrop class="btn owltometa-files-drop mb-2" selectable="1" multiple="1"
          [(files)]="tab.parameters.ontologiesFiles" [(dragFiles)]="dragFiles" [(invalidDrag)]="invalidDrag"
          [ngClass]="{ 'valid-drag': dragFiles, 'invalid-drag': invalidDrag }" [capturePaste]="true" accept="*.owl">
          Select/Drop your OWL files here
        </div>
        <h3>{{ tab.parameters.ontologiesFiles.length }} Files <button class="btn btn-sm btn-danger"
            (click)="tab.parameters.ontologiesFiles = []" tippy="Clear All">
            <i class="fa fa-fw fa-trash"></i>
          </button>
        </h3>
        <div>
          <table class="table owltometa-files-table">
            <thead>
              <tr>
                <th>Name</th>
                <th style="width: 7rem;">Size</th>
                <th style="width: 5rem;"></th>
              </tr>
            </thead>
            <tbody>
              <tr class="owltometa-file-row" *ngFor="let item of tab.parameters.ontologiesFiles; let i=index">
                <td>
                  <div *ngIf="['image/gif','image/png','image/jpeg'].includes(item.type)">
                    <div class="previewIcon" [ngfBackground]="item"></div>
                  </div>
                  <strong>{{ item.name }}</strong>
                </td>
                <td nowrap>
                  {{ item.size/1024/1024 | number:'.2' }} MB
                </td>
                <td class="text-right" nowrap>
                  <button type="button" class="btn btn-sm btn-danger btn-xs"
                    (click)="tab.parameters.ontologiesFiles.splice(i, 1)" tippy="Remove">
                    <i class="fa fa-fw fa-times"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </span>
    </div>
  </div>
</ng-template>
